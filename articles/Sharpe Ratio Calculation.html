<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Sharpe Ratio Calculation • fintech.trading.competition</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/darkly/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><link href="../extra.css" rel="stylesheet">
<meta property="og:title" content="Sharpe Ratio Calculation">
<meta property="og:description" content="fintech.trading.competition">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--><!-- Global site tag (gtag.js) - Google Analytics --><script async src="https://www.googletagmanager.com/gtag/js?id=G-9X0K4G58XL"></script><script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-9X0K4G58XL');
</script>
</head>
<body data-spy="scroll" data-target="#toc">
    

    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">fintech.trading.competition</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">2022.02.10</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../articles/sign_up.html">Sign Up</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Scoring Info
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/Scoring.html">General Idea</a>
    </li>
    <li>
      <a href="../articles/Sharpe%20Ratio%20Calculation.html">Sharpe Ratio Calculation</a>
    </li>
    <li>
      <a href="../articles/ranking.html">Determining Trader Ranks</a>
    </li>
  </ul>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://www.youtube.com/@DukeFintechCompetition" class="external-link">
    <span class="fa fa-youtube"></span>
     
  </a>
</li>
<li>
  <a href="https://github.com/gothic-hedge-society/fintech.trading.competition" class="external-link">
    <span class="fa fa-github"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Sharpe Ratio Calculation</h1>
            
      
      
      <div class="hidden name"><code>Sharpe Ratio Calculation.Rmd</code></div>

    </div>

    
    
<style type="text/css">
.dt-colnames {
  color: #fcba03;
}
</style>
<div class="section level2">
<h2 id="scoring-for-an-example-student">Scoring for an example student<a class="anchor" aria-label="anchor" href="#scoring-for-an-example-student"></a>
</h2>
<p>As discussed in the <a href="https://gothic-hedge-society.github.io/fintech.trading.competition/articles/Scoring.html">Scoring</a>
section, the Sharpe Ratio is an essential part of how traders are ranked
in this competition. Here, we walk through an example that explains how
the Sharpe Ratio would be calculated for an example contest
participant.</p>
<div class="section level4">
<h4 id="matching-up-calculations-w-excel-and-other-programs-a-quick-note">Matching up Calculations w/ Excel and Other Programs (a quick
note)<a class="anchor" aria-label="anchor" href="#matching-up-calculations-w-excel-and-other-programs-a-quick-note"></a>
</h4>
<p>As simple as it may seem, calculating logarithms can differ slightly
(or sometimes, significantly) depending on the precision of the program
you use. It’s possible to get different answers for the same log calcs
in Excel, R, and Python, and the difference gets magnified when
calculating GMRR.</p>
<p>Therefore, don’t worry too much if you try to follow along this
example and wind up with numbers that differ slightly. For the purposes
of fairness in the competition, it only matters that we use the same
program for everyone – which, in this case, is the <em>log</em>()
function in R.</p>
</div>
<div class="section level4">
<h4 id="what-risk-free-rate-do-we-use">What risk-free rate do we use?<a class="anchor" aria-label="anchor" href="#what-risk-free-rate-do-we-use"></a>
</h4>
<p>The Competition lasts about 3 months, starting on Day 1. On that day,
let’s further suppose that we visited the USDT’s website and found that
the 3-month CMT rate was 0.04% (annualized).</p>
<p>Since there are 252 trading days in a year, we convert that rate to a
trading day basis by dividing by 252 (and by 100 because it’s a
percent):</p>
<p>Let’s store that as a variable:</p>
<pre><code><span><span class="co">## [1] "The risk-free rate is 0.0001587%/trading day."</span></span></code></pre>
<p>The Gothic Hedge Society (who runs the trading competition) reasons
that on Day 1, all participants must decide if they’re going to actively
trade or if they’re just going to put all of their money into 3-month
risk-free debt and cash out when the Competition ends.</p>
<p>Since about half of the participants will <em>lose</em> money, that
idea isn’t as bad as it might sound.</p>
<p>Regardless, for the duration of the Competition, the ‘risk-free’ rate
would be taken to be the 0.04%/yr observed on Day 1. It will change
during the competition, for sure, but if you had truly run the “base
strategy” of buying bonds and waiting it out, then your capital would be
tied up all semester.</p>
<p>Therefore, the <strong>0.04%/yr</strong> CMT rate provided for 3
Month debt is the standard against which we’ll be judging everyone’s
performance.</p>
<p>–&gt; Now let’s suppose some trading data for a hypothetical Contest
participant.</p>
</div>
<div class="section level4">
<h4 id="example-traders-data">Example Trader’s Data<a class="anchor" aria-label="anchor" href="#example-traders-data"></a>
</h4>
<p>Let’s say that today’s date is 23 March 2021, and a student has been
participating in the competition for seven days.</p>
<p>Her end-of-day (EoD) portfolio balance and daily log returns are
given below:</p>
<pre><code><span><span class="co">## <span style="color: #949494;"># A tibble: 7 × 2</span></span></span>
<span><span class="co">##   `EoD Portfolio Balance` `Port. Return (%/trd day)`</span></span>
<span><span class="co">##                     <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>                      <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">## <span style="color: #BCBCBC;">1</span>                  <span style="text-decoration: underline;">999</span>950                   <span style="color: #BB0000;">NA</span>      </span></span>
<span><span class="co">## <span style="color: #BCBCBC;">2</span>                  <span style="text-decoration: underline;">999</span>890                   -<span style="color: #BB0000;">0.006</span><span style="color: #BB0000; text-decoration: underline;">00</span></span></span>
<span><span class="co">## <span style="color: #BCBCBC;">3</span>                 1<span style="text-decoration: underline;">000</span>100                    0.021<span style="text-decoration: underline;">0</span> </span></span>
<span><span class="co">## <span style="color: #BCBCBC;">4</span>                 1<span style="text-decoration: underline;">000</span>050                   -<span style="color: #BB0000;">0.005</span><span style="color: #BB0000; text-decoration: underline;">00</span></span></span>
<span><span class="co">## <span style="color: #BCBCBC;">5</span>                 1<span style="text-decoration: underline;">000</span>250                    0.020<span style="text-decoration: underline;">0</span> </span></span>
<span><span class="co">## <span style="color: #BCBCBC;">6</span>                 1<span style="text-decoration: underline;">000</span>075                   -<span style="color: #BB0000;">0.017</span><span style="color: #BB0000; text-decoration: underline;">5</span> </span></span>
<span><span class="co">## <span style="color: #BCBCBC;">7</span>                 1<span style="text-decoration: underline;">000</span>301                    0.022<span style="text-decoration: underline;">6</span></span></span></code></pre>
<p>The student’s <strong>daily portfolio returns</strong> are the log
returns of her daily portfolio value. For example, on 18 March 2021, she
started the day with $1,000,100.00 and ended with $1,000,050.00 in total
portfolio value. Therefore her return for that day was:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># 'log()' here is the natural log, not base 10.</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/Round.html" class="external-link">round</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/Log.html" class="external-link">log</a></span><span class="op">(</span><span class="fl">1000050.00</span> <span class="op">/</span> <span class="fl">1000100.00</span><span class="op">)</span> <span class="op">*</span> <span class="fl">100</span>, <span class="fl">5</span><span class="op">)</span>, <span class="st">"%"</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## [1] "-0.005%"</span></span></code></pre>
<p>Note that there’s no way to calculate a return on the very first day
because there’s nothing to compare it to.</p>
<p>The student’s overall <strong>geometric mean return</strong> <span class="math inline">\(R_{p}\)</span> is calculated as:</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Note that here, I'm rounding the returns to 4 digits, so the final answer will</span></span>
<span><span class="co"># differ slightly than the one reported in the table (and used for official</span></span>
<span><span class="co"># scoring) due to this rounding error.</span></span>
<span><span class="va">student_gmrr</span> <span class="op">&lt;-</span> <span class="va">student_data</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="st">"Port. Return (%/trd day)"</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/NA.html" class="external-link">is.na</a></span><span class="op">(</span><span class="va">`Port. Return (%/trd day)`</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu">tibble</span><span class="fu">::</span><span class="fu"><a href="https://tibble.tidyverse.org/reference/enframe.html" class="external-link">deframe</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> <span class="op">{</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/prod.html" class="external-link">prod</a></span><span class="op">(</span><span class="fl">1</span> <span class="op">+</span> <span class="va">.</span><span class="op">)</span><span class="op">^</span><span class="op">(</span><span class="fl">1</span><span class="op">/</span><span class="fu"><a href="https://rdrr.io/r/base/length.html" class="external-link">length</a></span><span class="op">(</span><span class="va">.</span><span class="op">)</span><span class="op">)</span> <span class="op">-</span> <span class="fl">1</span></span>
<span>  <span class="op">}</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/Round.html" class="external-link">round</a></span><span class="op">(</span><span class="va">student_gmrr</span><span class="op">*</span><span class="fl">100</span>, digits <span class="op">=</span> <span class="fl">4</span><span class="op">)</span>, <span class="st">"% per trading day"</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## [1] "0.5724% per trading day"</span></span></code></pre>
<p>The student’s <strong>excess return</strong> is</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">student_excess_return</span> <span class="op">&lt;-</span> <span class="va">student_gmrr</span> <span class="op">-</span> <span class="va">rf</span></span>
<span>  </span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/Round.html" class="external-link">round</a></span><span class="op">(</span><span class="va">student_excess_return</span><span class="op">*</span><span class="fl">100</span>, digits <span class="op">=</span> <span class="fl">3</span><span class="op">)</span>, <span class="st">" %/trading day"</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## [1] "0.572 %/trading day"</span></span></code></pre>
<p>The students <strong>volatility of returns</strong> <span class="math inline">\(\sigma_{p}\)</span> is the standard deviation of
her portfolio returns:</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">student_vol</span> <span class="op">&lt;-</span> <span class="va">student_data</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="st">"Port. Return (%/trd day)"</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/NA.html" class="external-link">is.na</a></span><span class="op">(</span><span class="va">`Port. Return (%/trd day)`</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu">tibble</span><span class="fu">::</span><span class="fu"><a href="https://tibble.tidyverse.org/reference/enframe.html" class="external-link">deframe</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/stats/sd.html" class="external-link">sd</a></span><span class="op">(</span><span class="op">)</span></span>
<span>  </span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/Round.html" class="external-link">round</a></span><span class="op">(</span><span class="va">student_vol</span><span class="op">*</span><span class="fl">100</span>, digits <span class="op">=</span> <span class="fl">3</span><span class="op">)</span>, <span class="st">" %/trading day"</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## [1] "1.74 %/trading day"</span></span></code></pre>
<p>Finally, we can calculate the Sharpe Ratio for this student.</p>
<p><span class="math display">\[\begin{align*}
{\tt Sharpe\ Ratio} = \frac{R_{p} - r_{f}}{\sigma_{p}}
\end{align*}\]</span></p>
<div class="section level5">
<h5 id="wherein">Wherein:<a class="anchor" aria-label="anchor" href="#wherein"></a>
</h5>
<p><span class="math display">\[\begin{align*}
R_{p} &amp; {\sf: Portfolio\ Return} \\
r_{f} &amp; {\sf: Risk\ free\ rate\ of\ return} \\
\sigma_{p} &amp; {\sf: Volatility\ of\ portfolio\ return}
\end{align*}\]</span></p>
</div>
</div>
<div class="section level3">
<h3 id="her-sharpe-is-therefore">Her Sharpe is therefore:<a class="anchor" aria-label="anchor" href="#her-sharpe-is-therefore"></a>
</h3>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">student_Sharpe</span> <span class="op">&lt;-</span> <span class="op">(</span><span class="va">student_gmrr</span> <span class="op">-</span> <span class="va">rf</span><span class="op">)</span> <span class="op">/</span> <span class="va">student_vol</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">student_Sharpe</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## [1] 0.3289045</span></span></code></pre>
<p>We repeat this calculation every day for every trader in the
Competition.</p>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p></p>
<p>Developed by <a href="https://github.com/JakeVestal" class="external-link">Jake Vestal</a>, Zoe Kim.</p>
</div>

<div class="pkgdown">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

      </footer>
</div>

  


  

  </body>
</html>
