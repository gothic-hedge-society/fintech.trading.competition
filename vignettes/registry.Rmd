---
title: "Registry"
output: rmarkdown::html_vignette
vignette: >
  %\VignetteIndexEntry{Registry}
  %\VignetteEngine{knitr::rmarkdown}
  %\VignetteEncoding{UTF-8}
---

```{r, setup, include=FALSE, echo=FALSE}
devtools::load_all(".")
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>"
)
```

```{css, echo=FALSE}
.dataTables_filter label {
font-size: 18px;
color: greenyellow;
}
```


```{r, echo = FALSE}
tibble::tibble(
  'status' = c('READY', 'INCOMPLETE'),
  'count'  = c(
    length(which(registry$status != 'pending account creation')),
    length(which(registry$status == 'pending account creation'))
  )
) %>%
  plotly::plot_ly(
    labels = ~status, 
    textposition = 'inside',
    textinfo = 'label+percent',
    insidetextfont = list(color = '#FFFFFF'),
    values = ~count, 
    type   = 'pie',
    marker = list(
      colors     = c('rgb(132,186,91)', 'rgb(128,133,133)'),
      line       = list(color = '#FFFFFF', width = 1)
    ),
    showlegend = FALSE
  ) %>% 
  plotly::layout(
    xaxis = list(showgrid = FALSE, zeroline = FALSE, showticklabels = FALSE),
    yaxis = list(showgrid = FALSE, zeroline = FALSE, showticklabels = FALSE)
  )
```

last updated: `r Sys.time()`

### Key

#### If your tradername doesn't appear here:
You've submitted your registration form but this website hasn't yet
refreshed and picked up your updated information.

#### 'pending account creation'
You've been sent a welcome email and an IBKR paper trading account invitation.
Join the Slack channel, submit your IBKR form, and wait (about one business day)

#### An Account ID
Your account is set up and you're ready. The system has matched your tradername
to the given Account ID- you'll want to confirm that that's correct. Use the
Slack channel if there's an issue.


```{r, echo = FALSE}
DT::datatable(
  registry,
  extensions = 'Scroller', 
  rownames   = FALSE,
  options = list(
    columnDefs = list(list(className = 'dt-center', targets = '_all')),
    initComplete = DT::JS(
      "
      function(settings, json) {
          $(this.api().table().header()).css({
              'font-size' : '20px', 
              'color' : 'greenyellow'
          });
      }
      "
    ),
    deferRender = TRUE,
    ordering    = FALSE,
    scrollY     = 500,
    scroller    = TRUE
  )
)
```
